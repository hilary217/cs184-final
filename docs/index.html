<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>  
    div.padded {  
      padding-top: 0px;  
      padding-right: 100px;  
      padding-bottom: 0.25in;  
      padding-left: 100px;  
    }  
  </style> 
<title>Your Name  |  CS 184</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="style.css" media="screen" />
</head>
<body>
<br />
<h1 align="middle">Assignment :Final Project</h1>
    <h2 align="middle">Kaifei Peng, Jinrui Zhang, Ruixin Huang</h2>

    <div class="padded">
            <h2 align="middle">Abstract</h2>
        <p>We expand our model for the behavior of light by considering effects caused by participating media, which is generally known as scattering. In our project, we implemented the behavior for both homogenous and non-homogenous
              participating media. 
      </p>
    <h2 align="middle">Technical approach</h2>
    
    <p> We are implementing volumetric scattering rendering in accordance with the paper provided in the project idea page (i.e. [1]). We chose to extend and modify the codes in project 3, which we consider is a good starting point of our rendering. We have basically implemented the random walk ray tracing introduced in the chapter 3 of paper [1] and substitute the old ray tracing method in project 3 with this new one. After substitution, reflecting and scattering events can be both rendered correctly, while only reflecting can be done using old method. After that, we extended our implementation
      to non-homogeneous media following the general idea introduced in chapter 5 of the paper.
    </p>


    <h2 align="middle">Implementation details </h2>
    
    

    <h2 align="middle">Implementations details for at_least_one_bounce </h2>
    <p>We have modified ray tracing code in project 3. Speficially, in at_least_one_bounce(), we first sample a travelling distance for the currently traced ray using DistanceSampler(), denoted by d. If d is less than the distance to the nearest surface, we can assume that the ray is “intercepted” before it reaches and surface and is reflected,  in this case we set the “interaction” as “scattering”. Otherwise, the ray reaches the surface and is reflected as implemented in project 3, and the “interaction” is set to “reflecting”.

    </p>Pseudocode for at_least_one_bounce(Point p, Ray ray_in, Interaction interaction)</p>
    <h2 align="middle">Pseudocode for at_least_one_bounce(Point p, Ray ray_in, Interaction interaction) </h2>
    <img src="3.png" width="300px" />
    <img src="5.png" width="300px" />
    <img src="4.png" width="360px" />

    <h2 align="middle"> Implementation details for distance sampler</h2>
    <p>For each ray-environment interaction, we use importance sampling to estimate the direct illumination. For each imcoming light, we multiply the incoming radiance with a cosine term and a brdf term if the interaction is “reflecting”; otherwise (when interaction is “scatteing”), we multiply with a phase function term and some coeffients related to the optic property of medium in the atmosphere. Formally, the formulas are expressed as below:</p>
    <h2 align="middle">Pseudocode for Distance sampling in homogenous medium  </h2>
    <img src="6.png" width="360px" />

    <h2 align="middle">Pseudocode for Distance sampling in non-homogenous medium  </h2>
    <img src="7.png" width="360px" />
    <img src="8.png" width="360px" />

    <h2 align="middle">Pseudocode for extinction coeffcient in non-homogenous medium </h2>
    <img src="9.png" width="480px" />
    <img src="10.png" width="480px" />



    <h2 align="middle">challenges we have encountered and how we tackled them</h2>
    <p><br>(1)getting the pdf for next_ray using inversion method, we used mathmatic tools.</br>
      (2)getting the right picture to render and changing the parameters, we determine our parameters with experiments and think deeper about what what each parameter affects.
      </p>

    
    <h2 align="middle">results : Link to Video</h2>
    <a href="https://www.youtube.com/watch?v=EHtnJjaOIeQ&feature=youtu.be">here</a>

    <h2 align="middle">References</h2>
    <p>[1] Eric P. Lafortune and Yves D. Willems, Rendering Participating Media with Bidirectional Path Tracing, 7th Eurographics Workshop on Rendering</p>

    <h2 aligh="middle">contributions</h2>




   

      <h2 align="middle">Summary</h2>
      <p>Important pseudo codes can be viewed in our milestone video/slides.
            In summary, at this point we have done:
      <br>
            (1) Designing phase function and a pdf-based sampler for sampling direction of next bounce with inverse method.
      </br>
            (2) Designing a distance sampler according to [1] using inverse method;
      <br>
            (3) Modify the skeleton and functions defined to fit scattering effects into our work.
      </br>
            
            </p>

    
   
 
            
</div>
</body>
</html>




